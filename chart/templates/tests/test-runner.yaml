{{/*
# Copyright (c) HashiCorp, Inc.
# SPDX-License-Identifier: BUSL-1.1
*/}}
{{- if .Values.tests.enabled }}
apiVersion: v1
kind: Pod
metadata:
  name: {{ include "vso.resourceNameWithTruncation" (dict "root" . "name" "test") }}
  namespace: {{ .Release.Namespace }}
  labels:
    app: {{ template "vso.chart.name" . }}
    chart: {{ template "vso.chart.chart" . }}
    heritage: {{ .Release.Service }}
    release: {{ .Release.Name }}
  annotations:
    "helm.sh/hook": test-success
    "fullNameOverride-test-annotation": {{ template "vso.chart.fullname" . }}-test
spec:
  containers:
    - name: vault-operator-test
      image: "{{ .Values.controller.manager.image.repository }}"
{{- end }}
